@import "../styles/variables";

.chat-room {
	display: flex;
	flex-direction: column;
	height: 100%;
	background: white;
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.chat-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	background: #f8fafc;
	border-bottom: 1px solid #e5e7eb;

	.chat-header-left {
		display: flex;
		align-items: center;
		gap: 12px;
		flex: 1;
	}

	.back-btn {
		background: none;
		border: none;
		padding: 8px;
		border-radius: 6px;
		cursor: pointer;
		color: #6b7280;
		transition: all 0.2s ease;

		&:hover {
			background: #e5e7eb;
			color: #374151;
		}
	}

	.participant-info {
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.participant-avatar {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: #3b82f6;
		color: white;
		display: flex;
		align-items: center;
		justify-content: center;
		font-weight: 600;
		font-size: 16px;
	}

	.participant-details {
		h3 {
			margin: 0;
			font-size: 1rem;
			font-weight: 600;
			color: #111827;
		}

		.product-info {
			margin: 2px 0 0 0;
			font-size: 0.8rem;
			color: #6b7280;
		}
	}

	.chat-header-actions {
		display: flex;
		gap: 8px;
	}

	.action-btn {
		background: none;
		border: none;
		padding: 8px;
		border-radius: 6px;
		cursor: pointer;
		color: #6b7280;
		transition: all 0.2s ease;

		&:hover {
			background: #e5e7eb;
			color: #374151;
		}
	}
}

.messages-area {
	flex: 1;
	overflow-y: auto;
	padding: 16px;
	background: #f9fafb;

	.loading-messages {
		display: flex;
		align-items: center;
		justify-content: center;
		height: 100%;
		color: #6b7280;
	}

	.messages-list {
		display: flex;
		flex-direction: column;
		gap: 8px;
	}
}

.date-separator {
	text-align: center;
	margin: 16px 0;

	&::before {
		content: "";
		position: absolute;
		left: 0;
		right: 0;
		top: 50%;
		height: 1px;
		background: #e5e7eb;
		z-index: 1;
	}

	span {
		background: #f9fafb;
		padding: 4px 12px;
		border-radius: 12px;
		font-size: 0.8rem;
		color: #6b7280;
		position: relative;
		z-index: 2;
	}
}

.message {
	display: flex;
	gap: 8px;
	margin-bottom: 8px;

	&.own {
		flex-direction: row-reverse;

		.message-bubble {
			background: #3b82f6;
			color: white;

			.message-time {
				color: rgba(255, 255, 255, 0.8);
			}
		}
	}

	&.other {
		.message-bubble {
			background: white;
			color: #111827;
			border: 1px solid #e5e7eb;
		}
	}

	.message-avatar {
		width: 32px;
		height: 32px;
		border-radius: 50%;
		background: #6b7280;
		color: white;
		display: flex;
		align-items: center;
		justify-content: center;
		font-weight: 600;
		font-size: 12px;
		flex-shrink: 0;
	}

	.message-content {
		flex: 1;
		max-width: 70%;
	}

	.message-sender {
		font-size: 0.8rem;
		font-weight: 600;
		color: #374151;
		margin-bottom: 4px;
	}

	.message-bubble {
		padding: 12px 16px;
		border-radius: 18px;
		position: relative;

		p {
			margin: 0;
			line-height: 1.4;
			word-wrap: break-word;
		}

		.message-time {
			font-size: 0.7rem;
			margin-top: 4px;
			display: block;
			color: #9ca3af;
		}
	}
}

.typing-indicator {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 16px;
	background: white;
	border-radius: 18px;
	border: 1px solid #e5e7eb;
	margin: 8px 0;
	max-width: fit-content;

	.typing-dots {
		display: flex;
		gap: 4px;

		span {
			width: 6px;
			height: 6px;
			border-radius: 50%;
			background: #9ca3af;
			animation: typing 1.4s infinite ease-in-out;

			&:nth-child(1) {
				animation-delay: -0.32s;
			}
			&:nth-child(2) {
				animation-delay: -0.16s;
			}
		}
	}

	.typing-text {
		font-size: 0.8rem;
		color: #6b7280;
		font-style: italic;
	}
}

@keyframes typing {
	0%,
	80%,
	100% {
		transform: scale(0.8);
		opacity: 0.5;
	}
	40% {
		transform: scale(1);
		opacity: 1;
	}
}

.message-input {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 16px 20px;
	background: white;
	border-top: 1px solid #e5e7eb;

	.message-field {
		flex: 1;
		padding: 12px 16px;
		border: 1px solid #d1d5db;
		border-radius: 24px;
		font-size: 0.9rem;
		outline: none;
		transition: all 0.2s ease;

		&:focus {
			border-color: #3b82f6;
			box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
		}

		&::placeholder {
			color: #9ca3af;
		}
	}

	.send-btn {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: #3b82f6;
		color: white;
		border: none;
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: all 0.2s ease;

		&:hover:not(:disabled) {
			background: #2563eb;
			transform: scale(1.05);
		}

		&:disabled {
			background: #d1d5db;
			cursor: not-allowed;
			transform: none;
		}
	}
}

.chat-empty {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: #6b7280;
	font-size: 1.1rem;
}

// Responsive design
@media (max-width: 768px) {
	.chat-room {
		border-radius: 0;
		height: 100vh;
	}

	.chat-header {
		padding: 12px 16px;

		.participant-details {
			h3 {
				font-size: 0.9rem;
			}

			.product-info {
				font-size: 0.7rem;
			}
		}
	}

	.messages-area {
		padding: 12px;
	}

	.message {
		.message-content {
			max-width: 85%;
		}

		.message-bubble {
			padding: 10px 14px;
		}
	}

	.message-input {
		padding: 12px 16px;

		.message-field {
			padding: 10px 14px;
			font-size: 0.8rem;
		}

		.send-btn {
			width: 36px;
			height: 36px;
		}
	}
}
